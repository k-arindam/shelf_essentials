<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="shelf_essentials API docs, for the Dart programming language.">
  <title>shelf_essentials - Dart API docs</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">
  
</head>

<body data-base-href="" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li class="self-crumb">shelf_essentials package</li>
  </ol>
  <div class="self-name">shelf_essentials</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <button class="toggle" id="theme-button" title="Toggle between light and dark mode" aria-label="Light and dark mode toggle">
    <span id="dark-theme-button" class="material-symbols-outlined" aria-hidden="true">
      dark_mode
    </span>
    <span id="light-theme-button" class="material-symbols-outlined" aria-hidden="true">
      light_mode
    </span>
  </button>
</header>
<main>
  <div id="dartdoc-main-content" class="main-content">
      
<section class="desc markdown">
  <h1 id="shelf_essentials">shelf_essentials</h1>
<p><img src="https://img.shields.io/github/license/k-arindam/shelf_essentials" alt="license">
<img src="https://img.shields.io/badge/Dart-3%2B-blue" alt="dart"></p>
<p><strong>Essential utilities for building HTTP servers with <code>shelf</code>.</strong></p>
<p><code>shelf_essentials</code> provides commonly needed extensions and helpers for:</p>
<ul>
<li>Reading request bodies</li>
<li>Parsing JSON requests</li>
<li>Handling multipart form data</li>
<li>Working with HTTP methods safely</li>
</ul>
<p>Designed to be <strong>lightweight</strong>, <strong>idiomatic</strong>, and <strong>shelf-native</strong>.</p>
<hr>
<h2 id="features">Features</h2>
<ul>
<li>üîå <code>Request</code> extensions for body, JSON, and form data</li>
<li>üì¶ Multipart form parsing with fields &amp; files</li>
<li>üß≠ Type-safe HTTP method enum</li>
<li>üß± Zero framework lock-in</li>
<li>‚ö° Minimal dependencies</li>
</ul>
<hr>
<h2 id="installation">Installation</h2>
<p>Add this to your <code>pubspec.yaml</code>:</p>
<pre class="language-yaml"><code class="language-yaml">dependencies:
  shelf_essentials: ^1.0.0
</code></pre>
<p>Then run:</p>
<pre class="language-bash"><code class="language-bash">dart pub get
</code></pre>
<hr>
<h2 id="usage">Usage</h2>
<h3 id="import">Import</h3>
<pre class="language-dart"><code class="language-dart">import 'package:shelf_essentials/shelf_essentials.dart';
</code></pre>
<hr>
<h2 id="request-extensions">Request Extensions</h2>
<h3 id="read-request-body">Read Request Body</h3>
<pre class="language-dart"><code class="language-dart">final body = await request.body();
</code></pre>
<hr>
<h3 id="parse-json-body">Parse JSON Body</h3>
<pre class="language-dart"><code class="language-dart">final data = await request.json();

print(data['email']);
</code></pre>
<blockquote>
<p>The returned value can be a <code>Map</code>, <code>List</code>, <code>String</code>, <code>num</code>, or <code>bool</code>.</p>
</blockquote>
<hr>
<h3 id="access-http-method-safely">Access HTTP Method Safely</h3>
<pre class="language-dart"><code class="language-dart">switch (request.httpMethod) {
  case HttpMethod.get:
    return Response.ok('GET request');
  case HttpMethod.post:
    return Response.ok('POST request');
  default:
    return Response.notFound('Unsupported method');
}
</code></pre>
<hr>
<h2 id="form-data-handling">Form Data Handling</h2>
<h3 id="parse-multipart-form-data">Parse Multipart Form Data</h3>
<pre class="language-dart"><code class="language-dart">final form = await request.formData();
</code></pre>
<hr>
<h3 id="access-fields">Access Fields</h3>
<pre class="language-dart"><code class="language-dart">final username = form.fields['username'];
final email = form.fields['email'];
</code></pre>
<hr>
<h3 id="access-uploaded-files">Access Uploaded Files</h3>
<pre class="language-dart"><code class="language-dart">final avatar = form.files['avatar'];

if (avatar != null) {
  final bytes = await avatar.readAsBytes();
  print('Uploaded file: ${avatar.name}');
}
</code></pre>
<hr>
<h2 id="cors-headers">CORS Headers</h2>
<h3 id="enable-cors-for-all-origins">Enable CORS for All Origins</h3>
<p>Add CORS headers to all responses with default settings:</p>
<pre class="language-dart"><code class="language-dart">final handler = Pipeline()
  .addMiddleware(corsHeaders())
  .addHandler((request) =&gt; Response.ok('Hello'));
</code></pre>
<hr>
<h3 id="restrict-cors-to-specific-origins">Restrict CORS to Specific Origins</h3>
<p>Allow CORS only from specific origins:</p>
<pre class="language-dart"><code class="language-dart">final handler = Pipeline()
  .addMiddleware(corsHeaders(
    originChecker: originOneOf(['https://example.com', 'https://app.example.com']),
  ))
  .addHandler((request) =&gt; Response.ok('Hello'));
</code></pre>
<hr>
<h3 id="add-custom-headers">Add Custom Headers</h3>
<p>Include additional custom headers in CORS responses:</p>
<pre class="language-dart"><code class="language-dart">final handler = Pipeline()
  .addMiddleware(corsHeaders(
    addedHeaders: {
      'X-Custom-Header': 'custom-value',
      'Access-Control-Allow-Credentials': 'true',
    },
    originChecker: originOneOf(['https://example.com']),
  ))
  .addHandler((request) =&gt; Response.ok('Hello'));
</code></pre>
<hr>
<h3 id="cors-defaults">CORS Defaults</h3>
<p>When using <code>corsHeaders</code> middleware, the following defaults are applied:</p>
<ul>
<li><strong>Allowed Methods</strong>: DELETE, GET, OPTIONS, PATCH, POST, PUT</li>
<li><strong>Allowed Headers</strong>: accept, accept-encoding, authorization, content-type, dnt, origin, user-agent</li>
<li><strong>Credentials</strong>: true</li>
<li><strong>Max-Age</strong>: 86400 seconds (24 hours)</li>
</ul>
<hr>
<h2 id="uploadedfile">UploadedFile</h2>
<p>Each uploaded file provides:</p>
<pre class="language-dart"><code class="language-dart">final name = file.name;
final contentType = file.contentType;
final bytes = await file.readAsBytes();
</code></pre>
<p>‚ö†Ô∏è <strong>Note:</strong><br>
File streams are <strong>single-use</strong>. Call either <code>readAsBytes()</code> <strong>or</strong> <code>openRead()</code> once.</p>
<hr>
<h3 id="api-overview">API Overview</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Request Extensions</strong></td>
<td>Methods to read body, parse JSON, handle forms, access HTTP method</td>
</tr>
<tr>
<td><strong>CORS Middleware</strong></td>
<td>Add CORS headers with origin validation</td>
</tr>
<tr>
<td><strong>Form Data Parsing</strong></td>
<td>Support for URL-encoded and multipart form data</td>
</tr>
<tr>
<td><strong>Uploaded Files</strong></td>
<td>Access file name, content-type, and read contents</td>
</tr>
<tr>
<td><strong>HTTP Methods</strong></td>
<td>Type-safe enum for common HTTP methods</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="requestextension-methods">RequestExtension Methods</h4>
<table>
<thead>
<tr>
<th>Method</th>
<th>Returns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>body()</code></td>
<td><code>Future&lt;String&gt;</code></td>
<td>Reads request body as String</td>
</tr>
<tr>
<td><code>json()</code></td>
<td><code>Future&lt;dynamic&gt;</code></td>
<td>Parses body as JSON (Map, List, String, num, bool)</td>
</tr>
<tr>
<td><code>formData()</code></td>
<td><code>Future&lt;FormData&gt;</code></td>
<td>Parses multipart or URL-encoded form data</td>
</tr>
<tr>
<td><code>httpMethod</code></td>
<td><code>HttpMethod</code></td>
<td>Type-safe HTTP method enum</td>
</tr>
<tr>
<td><code>connectionInfo</code></td>
<td><code>HttpConnectionInfo?</code></td>
<td>Socket connection information</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="cors-functions">CORS Functions</h4>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>corsHeaders()</code></td>
<td>Middleware to add CORS headers to responses</td>
</tr>
<tr>
<td><code>originAllowAll()</code></td>
<td>Origin checker that allows all origins</td>
</tr>
<tr>
<td><code>originOneOf()</code></td>
<td>Origin checker that allows specific origins</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="example-shelf-server">Example Shelf Server</h2>
<pre class="language-dart"><code class="language-dart">import 'package:shelf/shelf.dart';
import 'package:shelf/shelf_io.dart';
import 'package:shelf_essentials/shelf_essentials.dart';

void main() async {
  final handler = (Request request) async {
    if (request.httpMethod == HttpMethod.post) {
      final data = await request.json();
      return Response.ok('Hello ${data['name']}');
    }
    return Response.ok('Send a POST request');
  };

  await serve(handler, 'localhost', 8080);
  print('Server running on http://localhost:8080');
}
</code></pre>
<hr>
<h2 id="design-goals">Design Goals</h2>
<ul>
<li>‚úÖ Minimal surface area</li>
<li>‚úÖ Idiomatic Dart</li>
<li>‚úÖ Shelf-first</li>
<li>‚úÖ No hidden magic</li>
<li>‚úÖ Easy to extend</li>
</ul>
<hr>
<h2 id="roadmap">Roadmap</h2>
<ul>
<li>Content-Type validation helpers</li>
<li>Typed JSON parsing utilities</li>
<li>Streaming file size helpers</li>
<li>Improved error handling</li>
<li>Middleware utilities</li>
</ul>
<hr>
<h2 id="contributing">Contributing</h2>
<p>Contributions are welcome!</p>
<ul>
<li>Open an issue for bugs or feature requests</li>
<li>Submit a PR with clear description and tests</li>
<li>Keep APIs simple and shelf-compatible</li>
</ul>
<hr>
<h2 id="license">License</h2>
<p>MIT License ¬© 2025<br>
Use it freely in open-source and commercial projects.</p>
<hr>
<h2 id="acknowledgements">Acknowledgements</h2>
<ul>
<li>Inspired by the simplicity of the <a href="https://pub.dev/packages/shelf"><code>shelf</code></a> package</li>
<li>Special thanks to <a href="https://dart-frog.dev"><code>dart-frog</code></a></li>
<li>Special thanks to <a href="https://github.com/lenniezelk/shelf-cors-headers"><code>shelf-cors-headers</code></a></li>
</ul>
</section>


      <section class="summary">
          <h2>Libraries</h2>
        <dl>
          <dt id="shelf_essentials">
  <span class="name"><a href="shelf_essentials/">shelf_essentials</a></span> 

</dt>
<dd>Essential utilities for building HTTP servers with <a href="https://pub.dev/packages/shelf">shelf</a>.
</dd>

        </dl>
      </section>
  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li class="self-crumb">shelf_essentials package</li>
</ol>

    <h5 class="hidden-xs"><span class="package-name">shelf_essentials</span> <span class="package-kind">package</span></h5>
    <ol>
      <li class="section-title">Libraries</li>
      <li><a href="shelf_essentials/">shelf_essentials</a></li>
</ol>

  </div>
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div>
</main>
<footer>
  <span class="no-break">
    shelf_essentials
      1.0.1
  </span>
  
</footer>


<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>

</body>
</html>

